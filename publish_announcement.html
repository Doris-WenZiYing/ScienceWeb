<!DOCTYPE html>
<html lang="zh-TW">

<head>
  <meta charset="UTF-8">
  <title>ç™¼ä½ˆå…¬å‘Š - ç§‘å­¸æœƒç®¡ç†ç³»çµ±</title>
  <!-- FontAwesome CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html,
    body {
      height: 100%;
      font-family: 'Microsoft JhengHei', 'Arial', sans-serif;
      background: linear-gradient(135deg, #8360c3 0%, #2ebf91 100%);
    }

    /* é ‚éƒ¨å€åŸŸ */
    .header {
      height: 70px;
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 30px;
      box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
      position: relative;
      z-index: 100;
    }

    .header::before {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, #8360c3 0%, #2ebf91 100%);
    }

    /* Logo å’Œæ¨™é¡Œå€åŸŸ */
    .header-left {
      display: flex;
      align-items: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .header-left:hover {
      transform: scale(1.02);
    }

    .header img.logo {
      height: 50px;
      filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.1));
      transition: transform 0.3s ease;
      margin-right: 15px;
    }

    .header-title {
      font-size: 24px;
      font-weight: 300;
      color: #333;
      transition: color 0.3s ease;
    }

    .header-left:hover .header-title {
      color: #8360c3;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 25px;
      position: relative;
    }

    .icon {
      position: relative;
      padding: 12px;
      border-radius: 50%;
      background: linear-gradient(135deg, #8360c3 0%, #2ebf91 100%);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(131, 96, 195, 0.3);
      border: 2px solid rgba(255, 255, 255, 0.2);
      animation: pulse 2s infinite;
    }

    .icon:hover {
      transform: translateY(-3px) scale(1.1);
      box-shadow: 0 12px 35px rgba(131, 96, 195, 0.5);
      background: linear-gradient(135deg, #9d7ce6 0%, #3dd5a3 100%);
    }

    .icon:active {
      transform: translateY(-1px) scale(1.05);
      transition: all 0.1s ease;
    }

    .icon i {
      font-size: 20px;
      color: white;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      animation: bellShake 0.5s ease-in-out infinite alternate;
    }

    .icon::after {
      content: '3';
      position: absolute;
      top: -5px;
      right: -5px;
      background: linear-gradient(135deg, #ff4757 0%, #ff3742 100%);
      color: white;
      border-radius: 50%;
      width: 22px;
      height: 22px;
      font-size: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      box-shadow: 0 2px 8px rgba(255, 71, 87, 0.4);
      border: 2px solid white;
      animation: bounce 1s ease-in-out infinite;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    }

    .avatar {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      background: linear-gradient(135deg, #8360c3 0%, #2ebf91 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 3px solid #fff;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .avatar:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 20px rgba(131, 96, 195, 0.3);
    }

    .avatar i {
      font-size: 20px;
      color: white;
    }

    /* ä¸‹æ‹‰é¸å–® */
    .dropdown {
      position: absolute;
      top: 65px;
      right: 0;
      background: white;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      display: none;
      min-width: 120px;
      z-index: 1000;
      overflow: hidden;
      animation: dropdownFade 0.3s ease;
    }

    @keyframes dropdownFade {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes pulse {
      0% { box-shadow: 0 4px 15px rgba(131, 96, 195, 0.3); }
      50% { box-shadow: 0 4px 25px rgba(131, 96, 195, 0.6); }
      100% { box-shadow: 0 4px 15px rgba(131, 96, 195, 0.3); }
    }

    @keyframes bellShake {
      0% { transform: rotate(-5deg); }
      100% { transform: rotate(5deg); }
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-3px); }
      60% { transform: translateY(-2px); }
    }

    .dropdown a {
      display: flex;
      align-items: center;
      padding: 12px 16px;
      text-decoration: none;
      color: #333;
      font-size: 14px;
      transition: all 0.2s ease;
    }

    .dropdown a:hover {
      background: linear-gradient(135deg, #8360c3 0%, #2ebf91 100%);
      color: white;
    }

    .dropdown a i {
      margin-right: 8px;
      width: 16px;
    }

    /* é€šçŸ¥é¢æ¿æ¨£å¼ */
    .notification-panel {
      position: absolute;
      top: 65px;
      right: 80px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      display: none;
      width: 380px;
      max-height: 500px;
      z-index: 1000;
      animation: dropdownFade 0.3s ease;
      overflow: hidden;
    }

    .notification-header {
      padding: 20px;
      background: linear-gradient(135deg, #8360c3 0%, #2ebf91 100%);
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-radius: 15px 15px 0 0;
    }

    .notification-header h3 {
      font-size: 16px;
      font-weight: 600;
      margin: 0;
    }

    .notification-actions {
      display: flex;
      gap: 10px;
    }

    .notification-btn {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      padding: 5px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 12px;
      transition: all 0.3s ease;
    }

    .notification-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: scale(1.05);
    }

    .notification-list {
      max-height: 400px;
      overflow-y: auto;
    }

    .notification-item {
      padding: 15px 20px;
      border-bottom: 1px solid #f0f0f0;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      display: flex;
      gap: 12px;
    }

    .notification-item:hover {
      background: rgba(131, 96, 195, 0.05);
    }

    .notification-item.unread {
      background: rgba(131, 96, 195, 0.08);
    }

    .notification-item.unread::before {
      content: '';
      position: absolute;
      left: 8px;
      top: 50%;
      transform: translateY(-50%);
      width: 8px;
      height: 8px;
      background: #e74c3c;
      border-radius: 50%;
    }

    .notification-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      flex-shrink: 0;
    }

    .notification-icon.activity {
      background: linear-gradient(135deg, #8360c3 0%, #2ebf91 100%);
      color: white;
    }

    .notification-icon.deadline {
      background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
      color: white;
    }

    .notification-icon.announcement {
      background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
      color: white;
    }

    .notification-content {
      flex: 1;
    }

    .notification-title {
      font-size: 14px;
      font-weight: 600;
      color: #333;
      margin-bottom: 4px;
    }

    .notification-text {
      font-size: 13px;
      color: #666;
      margin-bottom: 4px;
    }

    .notification-time {
      font-size: 11px;
      color: #999;
    }

    .notification-delete {
      position: absolute;
      right: 15px;
      top: 15px;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: rgba(231, 76, 60, 0.1);
      color: #e74c3c;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      opacity: 0;
      transition: all 0.3s ease;
    }

    .notification-item:hover .notification-delete {
      opacity: 1;
    }

    .notification-delete:hover {
      background: #e74c3c;
      color: white;
      transform: scale(1.1);
    }

    .notification-empty {
      padding: 60px 20px;
      text-align: center;
      color: #999;
    }

    .notification-empty i {
      font-size: 48px;
      color: #ddd;
      margin-bottom: 15px;
    }

    .notification-list::-webkit-scrollbar { width: 6px; }
    .notification-list::-webkit-scrollbar-track { background: #f0f0f0; }
    .notification-list::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, #8360c3 0%, #2ebf91 100%);
      border-radius: 3px;
    }

    /* ä¸»é«”å€åŸŸ */
    .main {
      display: flex;
      height: calc(100% - 70px);
      gap: 0;
    }

    .sidebar {
      width: 280px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      padding: 30px 0;
      display: flex;
      flex-direction: column;
      box-shadow: 2px 0 20px rgba(0, 0, 0, 0.1);
      position: relative;
      overflow-y: auto;
    }

    .sidebar::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 4px;
      height: 100%;
      background: linear-gradient(180deg, #8360c3 0%, #2ebf91 100%);
    }

    .menu {
      flex: 1;
      margin-top: 20px;
    }

    .menu-item {
      display: block;
      position: relative;
    }

    .menu-link {
      display: flex;
      align-items: center;
      padding: 15px 25px;
      text-decoration: none;
      color: #555;
      font-size: 15px;
      transition: all 0.3s ease;
      border-left: 4px solid transparent;
      cursor: pointer;
    }

    .menu-link:hover,
    .menu-link.active {
      color: #8360c3;
      background: rgba(131, 96, 195, 0.1);
      border-left: 4px solid #8360c3;
      transform: translateX(5px);
    }

    .menu-link i {
      margin-right: 12px;
      width: 20px;
      font-size: 16px;
    }

    .menu-arrow {
      margin-left: auto;
      font-size: 12px;
      transition: transform 0.3s ease;
    }

    .menu-item.expanded .menu-arrow {
      transform: rotate(180deg);
    }

    /* äºŒç´šé¸å–® */
    .submenu {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
      background: rgba(131, 96, 195, 0.05);
    }

    .submenu.show {
      max-height: 500px;
    }

    .submenu-item {
      position: relative;
    }

    .submenu-link {
      display: flex;
      align-items: center;
      padding: 12px 25px 12px 45px;
      text-decoration: none;
      color: #666;
      font-size: 14px;
      transition: all 0.3s ease;
      border-left: 4px solid transparent;
      cursor: pointer;
    }

    .submenu-link:hover {
      color: #8360c3;
      background: rgba(131, 96, 195, 0.1);
      border-left: 4px solid #8360c3;
      transform: translateX(5px);
    }

    .submenu-link.active {
      color: #8360c3;
      background: rgba(131, 96, 195, 0.1);
      border-left: 4px solid #8360c3;
      transform: translateX(5px);
    }

    .submenu-link i {
      margin-right: 10px;
      width: 16px;
      font-size: 14px;
    }

    /* ä¸‰ç´šé¸å–® */
    .sub-submenu {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
      background: rgba(131, 96, 195, 0.03);
    }

    .sub-submenu.show {
      max-height: 300px;
    }

    .sub-submenu-link {
      display: flex;
      align-items: center;
      padding: 10px 25px 10px 65px;
      text-decoration: none;
      color: #777;
      font-size: 13px;
      transition: all 0.3s ease;
      border-left: 4px solid transparent;
    }

    .sub-submenu-link:hover {
      color: #8360c3;
      background: rgba(131, 96, 195, 0.08);
      border-left: 4px solid #8360c3;
      transform: translateX(5px);
    }

    .sub-submenu-link i {
      margin-right: 8px;
      width: 14px;
      font-size: 12px;
    }

    /* å…§å®¹å€åŸŸ */
    .content {
      flex: 1;
      padding: 40px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      display: flex;
      flex-direction: column;
      overflow-y: auto;
    }

    /* é é¢æ¨™é¡Œ */
    .page-header {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 30px 40px;
      margin-bottom: 30px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .page-title-section h1 {
      font-size: 28px;
      color: #333;
      margin-bottom: 10px;
      font-weight: 600;
      display: flex;
      align-items: center;
    }

    .page-title-section h1 i {
      margin-right: 15px;
      color: #8360c3;
      font-size: 32px;
    }

    .page-title-section p {
      color: #666;
      font-size: 16px;
      line-height: 1.6;
    }

    /* æ™‚é–“é¡¯ç¤ºå€åŸŸ */
    .time-display {
      background: linear-gradient(135deg, #8360c3 0%, #2ebf91 100%);
      color: white;
      padding: 10px 20px;
      border-radius: 25px;
      font-size: 14px;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 2px 10px rgba(131, 96, 195, 0.3);
      white-space: nowrap;
    }

    .time-display i {
      font-size: 16px;
      color: white;
    }

    /* ç™¼ä½ˆè¡¨å–® */
    .publish-form {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      margin-bottom: 30px;
    }

    .form-section {
      margin-bottom: 30px;
    }

    .form-section h3 {
      font-size: 18px;
      color: #333;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      font-weight: 600;
    }

    .form-section h3 i {
      margin-right: 10px;
      color: #8360c3;
      font-size: 20px;
    }

    .form-group {
      margin-bottom: 25px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #444;
      font-size: 14px;
    }

    .form-group input,
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e1e8ed;
      border-radius: 10px;
      font-size: 14px;
      transition: all 0.3s ease;
      background: white;
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: #8360c3;
      box-shadow: 0 0 0 3px rgba(131, 96, 195, 0.1);
      transform: translateY(-1px);
    }

    .form-group textarea {
      min-height: 120px;
      resize: vertical;
      font-family: inherit;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }

    /* å„ªå…ˆç´šé¸æ“‡ */
    .priority-options {
      display: flex;
      gap: 15px;
      margin-top: 8px;
    }

    .priority-option {
      display: flex;
      align-items: center;
      padding: 10px 16px;
      border: 2px solid #e1e8ed;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      background: white;
    }

    .priority-option:hover {
      border-color: #8360c3;
      transform: translateY(-1px);
    }

    .priority-option.selected {
      border-color: #8360c3;
      background: rgba(131, 96, 195, 0.1);
    }

    .priority-option input[type="radio"] {
      margin-right: 8px;
      width: auto;
    }

    .priority-high {
      border-color: #ff4757;
    }

    .priority-high.selected {
      border-color: #ff4757;
      background: rgba(255, 71, 87, 0.1);
    }

    .priority-medium {
      border-color: #ffa502;
    }

    .priority-medium.selected {
      border-color: #ffa502;
      background: rgba(255, 165, 2, 0.1);
    }

    .priority-normal {
      border-color: #2ed573;
    }

    .priority-normal.selected {
      border-color: #2ed573;
      background: rgba(46, 213, 115, 0.1);
    }

    /* é™„ä»¶ä¸Šå‚³ */
    .file-upload {
      border: 2px dashed #e1e8ed;
      border-radius: 10px;
      padding: 40px 20px;
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
      background: #fafbfc;
    }

    .file-upload:hover {
      border-color: #8360c3;
      background: rgba(131, 96, 195, 0.05);
    }

    .file-upload.dragover {
      border-color: #8360c3;
      background: rgba(131, 96, 195, 0.1);
      transform: scale(1.02);
    }

    .file-upload i {
      font-size: 48px;
      color: #8360c3;
      margin-bottom: 15px;
    }

    .file-upload p {
      color: #666;
      font-size: 16px;
      margin-bottom: 10px;
    }

    .file-upload small {
      color: #999;
      font-size: 12px;
    }

    .file-list {
      margin-top: 15px;
    }

    .file-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 15px;
      background: white;
      border: 1px solid #e1e8ed;
      border-radius: 8px;
      margin-bottom: 8px;
    }

    .file-info {
      display: flex;
      align-items: center;
    }

    .file-info i {
      margin-right: 10px;
      color: #8360c3;
    }

    .remove-file {
      color: #ff4757;
      cursor: pointer;
      padding: 5px;
      border-radius: 5px;
      transition: all 0.2s ease;
    }

    .remove-file:hover {
      background: rgba(255, 71, 87, 0.1);
    }

    /* æŒ‰éˆ•å€åŸŸ */
    .form-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 30px;
      border-top: 1px solid #e1e8ed;
      margin-top: 30px;
    }

    .btn {
      padding: 12px 30px;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .btn-primary {
      background: linear-gradient(135deg, #8360c3 0%, #2ebf91 100%);
      color: white;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(131, 96, 195, 0.4);
    }

    .btn-secondary {
      background: #f8f9fa;
      color: #666;
      border: 2px solid #e1e8ed;
    }

    .btn-secondary:hover {
      background: #e9ecef;
      transform: translateY(-1px);
    }

    .btn-success {
      background: linear-gradient(135deg, #2ed573 0%, #17a2b8 100%);
      color: white;
    }

    .btn-success:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(46, 213, 115, 0.4);
    }

    /* é è¦½å€åŸŸ */
    .preview-section {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .preview-section h3 {
      font-size: 20px;
      color: #333;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      font-weight: 600;
    }

    .preview-section h3 i {
      margin-right: 10px;
      color: #8360c3;
    }

    .announcement-preview {
      border: 1px solid #e1e8ed;
      border-radius: 15px;
      padding: 25px;
      background: white;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    }

    .preview-header {
      display: flex;
      align-items: center;
      justify-content: between;
      margin-bottom: 15px;
      padding-bottom: 15px;
      border-bottom: 1px solid #f1f3f4;
    }

    .preview-title {
      font-size: 20px;
      font-weight: 600;
      color: #333;
      margin-bottom: 5px;
    }

    .preview-meta {
      display: flex;
      align-items: center;
      gap: 15px;
      font-size: 14px;
      color: #666;
    }

    .preview-content {
      line-height: 1.8;
      color: #444;
      font-size: 15px;
      white-space: pre-wrap;
    }

    /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
    @media (max-width: 768px) {
      .main {
        flex-direction: column;
      }

      .sidebar {
        width: 100%;
        height: auto;
      }

      .content {
        padding: 20px;
      }

      .form-row {
        grid-template-columns: 1fr;
      }

      .priority-options {
        flex-direction: column;
      }

      .form-actions {
        flex-direction: column;
        gap: 15px;
      }

      .page-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 20px;
      }

      .time-display {
        align-items: flex-start;
      }
    }

    /* æ»¾å‹•æ¢ç¾åŒ– */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.1);
    }

    ::-webkit-scrollbar-thumb {
      background: linear-gradient(135deg, #8360c3 0%, #2ebf91 100%);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(135deg, #2ebf91 0%, #8360c3 100%);
    }

    /* æˆåŠŸæç¤º */
    .success-message {
      background: rgba(46, 213, 115, 0.1);
      border: 1px solid #2ed573;
      color: #27ae60;
      padding: 15px 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      display: none;
    }

    .success-message i {
      margin-right: 10px;
    }
  </style>
</head>

<body>
  <!-- é ‚éƒ¨æ¬„ -->
  <div class="header">
    <div class="header-left" onclick="location.href='activity_calendar.html';">
      <img src="image/logo1.gif" alt="Logo" class="logo">
    </div>
    <div class="header-right">
      <div class="icon" id="notificationIcon"><i class="fas fa-bell"></i></div>
      <div class="notification-panel" id="notificationPanel">
        <div class="notification-header">
          <h3>é€šçŸ¥</h3>
          <div class="notification-actions">
            <button class="notification-btn" onclick="markAllAsRead()">å…¨éƒ¨å·²è®€</button>
            <button class="notification-btn" onclick="clearAllNotifications()">æ¸…é™¤å…¨éƒ¨</button>
          </div>
        </div>
        <div class="notification-list" id="notificationList">
          <!-- é€šçŸ¥é …ç›®å°‡ç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
        </div>
      </div>
      <div class="avatar" id="avatar">
        <i class="fas fa-user-shield"></i>
      </div>
      <div class="dropdown" id="dropdown">
        <a href="login_admin.html">
          <i class="fas fa-sign-out-alt"></i>
          ç™»å‡º
        </a>
      </div>
    </div>
  </div>

  <div class="main">
    <div class="sidebar">
      <div class="menu">
        <div class="menu-item">
          <a href="activity_calendar.html" class="menu-link">
            <i class="fas fa-calendar"></i>
            è¡Œäº‹æ›†
          </a>
        </div>

        <div class="menu-item">
          <a href="admin_dashboard.html" class="menu-link">
            <i class="fas fa-home"></i>
            æ´»å‹•ç›¸ç°¿
          </a>
        </div>

         <div class="menu-item expanded">
           <div class="menu-link" onclick="toggleMenu(this); return false;">
             <i class="fas fa-bullhorn"></i>
             ç™¼ä½ˆå…¬å‘Š/æ´»å‹•/è¡¨å–®
             <i class="fas fa-chevron-down menu-arrow"></i>
           </div>
           <div class="submenu show">
             <div class="submenu-item">
               <a href="publish_announcement.html" class="submenu-link active">
                 <i class="fas fa-bullhorn"></i>
                 ç™¼ä½ˆå…¬å‘Š
               </a>
             </div>
             <div class="submenu-item">
               <a href="admin_activity_publish.html" class="submenu-link">
                 <i class="fas fa-plus-circle"></i>
                 ç™¼ä½ˆæ¯”è³½åŠæ´»å‹•
               </a>
             </div>
             <div class="submenu-item">
               <a href="admin_table_publish.html" class="submenu-link">
                 <i class="fas fa-comment-alt"></i>
                 ç™¼ä½ˆæ´»å‹•åé¥‹è¡¨å–®
               </a>
             </div>
           </div>
         </div>

        <div class="menu-item">
          <a href="admin_name_manage.html" class="menu-link">
            <i class="fas fa-user-edit"></i>
            å ±åäººå“¡åå–®ç®¡ç†
          </a>
        </div>

        <div class="menu-item">
          <a href="admin_statistics.html" class="menu-link">
            <i class="fas fa-trophy"></i>
            çµ±è¨ˆæ¯”è³½åæ¬¡
          </a>
        </div>

        <div class="menu-item">
          <a href="admin_upload_files.html" class="menu-link">
            <i class="fas fa-upload"></i>
            é–‹æ”¾ä¸Šå‚³æª”æ¡ˆ
          </a>
        </div>

        <div class="menu-item">
          <a href="online_scheduling.html" class="menu-link">
            <i class="fas fa-user-check"></i>
            ç·šä¸Šç°½åˆ°è¡¨
          </a>
        </div>

        <div class="menu-item">
          <a href="admin_request_review.html" class="menu-link">
            <i class="fas fa-file-signature"></i>
            è«‹å‡ç”³è«‹
          </a>
        </div>

        <div class="menu-item">
          <a href="meeting_records.html" class="menu-link">
            <i class="fas fa-clipboard"></i>
            é–‹æœƒç´€éŒ„
          </a>
        </div>

        <div class="menu-item">
          <a href="auto_notification.html" class="menu-link">
            <i class="fas fa-bell"></i>
            è‡ªå‹•æ¨æ’­é€šçŸ¥
          </a>
        </div>

        <div class="menu-item">
          <a href="image_recognition.html" class="menu-link">
            <i class="fas fa-eye"></i>
            åœ–ç‰‡è­˜åˆ¥
          </a>
        </div>
      </div>
    </div>

    <div class="content">
      <!-- é é¢æ¨™é¡Œ -->
      <div class="page-header">
        <div class="page-title-section">
          <h1><i class="fas fa-bullhorn"></i>ç™¼å¸ƒå…¬å‘Š</h1>
          <p>ç™¼å¸ƒé‡è¦å…¬å‘Šè¨Šæ¯ï¼Œè®“ç§‘å­¸æœƒæˆå“¡åŠæ™‚äº†è§£æœ€æ–°è³‡è¨Š</p>
        </div>
        <div class="time-display">
          <i class="fas fa-clock"></i>
          <span id="timeDisplay">2025å¹´09æœˆ18æ—¥ æ˜ŸæœŸå›› ä¸Šåˆ09:56:44</span>
        </div>
      </div>

      <!-- æˆåŠŸè¨Šæ¯ -->
      <div class="success-message" id="successMessage">
        <i class="fas fa-check-circle"></i>
        å…¬å‘Šç™¼å¸ƒæˆåŠŸï¼
      </div>

      <!-- ç™¼ä½ˆè¡¨å–® -->
      <div class="publish-form">
        <form id="announcementForm">
          <!-- åŸºæœ¬è³‡è¨Š -->
          <div class="form-section">
            <h3><i class="fas fa-info-circle"></i>åŸºæœ¬è³‡è¨Š</h3>

            <div class="form-row">
              <div class="form-group">
                <label for="title">å…¬å‘Šæ¨™é¡Œ *</label>
                <input type="text" id="title" name="title" placeholder="è«‹è¼¸å…¥å…¬å‘Šæ¨™é¡Œ" required>
              </div>
              <div class="form-group">
                <label for="category">å…¬å‘Šé¡åˆ¥</label>
                <select id="category" name="category">
                  <option value="general">ä¸€èˆ¬å…¬å‘Š</option>
                  <option value="urgent">ç·Šæ€¥é€šçŸ¥</option>
                  <option value="activity">æ´»å‹•å…¬å‘Š</option>
                  <option value="meeting">æœƒè­°é€šçŸ¥</option>
                  <option value="competition">ç«¶è³½è³‡è¨Š</option>
                  <option value="academic">å­¸è¡“æ´»å‹•</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="content">å…¬å‘Šå…§å®¹ *</label>
              <textarea id="content" name="content" placeholder="è«‹è¼¸å…¥å…¬å‘Šè©³ç´°å…§å®¹..." required></textarea>
            </div>
          </div>

          <!-- ç™¼ä½ˆè¨­å®š -->
          <div class="form-section">
            <h3><i class="fas fa-cog"></i>ç™¼ä½ˆè¨­å®š</h3>

            <div class="form-row">
              <div class="form-group">
                <label for="publishDate">ç™¼ä½ˆæ—¥æœŸ</label>
                <input type="datetime-local" id="publishDate" name="publishDate">
              </div>
              <div class="form-group">
                <label for="expireDate">åˆ°æœŸæ—¥æœŸ</label>
                <input type="datetime-local" id="expireDate" name="expireDate">
              </div>
            </div>

            <div class="form-group">
              <label>å„ªå…ˆç´šåˆ¥</label>
              <div class="priority-options">
                <div class="priority-option priority-high">
                  <input type="radio" name="priority" value="high" id="priorityHigh">
                  <label for="priorityHigh">ğŸ”´ é«˜å„ªå…ˆç´š</label>
                </div>
                <div class="priority-option priority-medium">
                  <input type="radio" name="priority" value="medium" id="priorityMedium">
                  <label for="priorityMedium">ğŸŸ¡ ä¸­å„ªå…ˆç´š</label>
                </div>
                <div class="priority-option priority-normal selected">
                  <input type="radio" name="priority" value="normal" id="priorityNormal" checked>
                  <label for="priorityNormal">ğŸŸ¢ ä¸€èˆ¬å„ªå…ˆç´š</label>
                </div>
              </div>
            </div>
          </div>

          <!-- é™„ä»¶ä¸Šå‚³ -->
          <div class="form-section">
            <h3><i class="fas fa-paperclip"></i>é™„ä»¶ä¸Šå‚³</h3>

            <div class="file-upload" id="fileUpload">
              <i class="fas fa-cloud-upload-alt"></i>
              <p>æ‹–æ”¾æª”æ¡ˆè‡³æ­¤è™•æˆ–é»æ“Šé¸æ“‡æª”æ¡ˆ</p>
              <small>æ”¯æ´åœ–ç‰‡ã€PDFã€Word æ–‡ä»¶ç­‰æ ¼å¼ï¼Œå–®æª”æœ€å¤§ 10MB</small>
              <input type="file" id="fileInput" multiple style="display: none;">
            </div>

            <div class="file-list" id="fileList"></div>
          </div>

          <!-- é€šçŸ¥è¨­å®š -->
          <div class="form-section">
            <h3><i class="fas fa-bell"></i>é€šçŸ¥è¨­å®š</h3>

            <div class="form-group">
              <label>
                <input type="checkbox" id="emailNotify" name="emailNotify" checked>
                ç™¼é€é›»å­éƒµä»¶é€šçŸ¥
              </label>
            </div>

            <div class="form-group">
              <label>
                <input type="checkbox" id="pushNotify" name="pushNotify" checked>
                æ¨é€å³æ™‚é€šçŸ¥
              </label>
            </div>

            <div class="form-group">
              <label>
                <input type="checkbox" id="smsNotify" name="smsNotify">
                ç™¼é€ç°¡è¨Šé€šçŸ¥ï¼ˆç·Šæ€¥å…¬å‘Šï¼‰
              </label>
            </div>
          </div>

          <!-- æŒ‰éˆ•å€åŸŸ -->
          <div class="form-actions">
            <div>
              <button type="button" class="btn btn-secondary" onclick="clearForm()">
                <i class="fas fa-eraser"></i>æ¸…ç©ºè¡¨å–®
              </button>
              <button type="button" class="btn btn-secondary" onclick="saveAsDraft()">
                <i class="fas fa-save"></i>å„²å­˜è‰ç¨¿
              </button>
            </div>
            <div>
              <button type="button" class="btn btn-success" onclick="previewAnnouncement()">
                <i class="fas fa-eye"></i>é è¦½
              </button>
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-paper-plane"></i>ç™¼å¸ƒå…¬å‘Š
              </button>
            </div>
          </div>
        </form>
      </div>

      <!-- é è¦½å€åŸŸ -->
      <div class="preview-section" id="previewSection" style="display: none;">
        <h3><i class="fas fa-eye"></i>å…¬å‘Šé è¦½</h3>
        <div class="announcement-preview">
          <div class="preview-header">
            <div>
              <div class="preview-title" id="previewTitle">å…¬å‘Šæ¨™é¡Œ</div>
              <div class="preview-meta">
                <span id="previewCategory">ä¸€èˆ¬å…¬å‘Š</span>
                <span id="previewDate">2025-09-18</span>
                <span id="previewPriority">ğŸŸ¢ ä¸€èˆ¬å„ªå…ˆç´š</span>
              </div>
            </div>
          </div>
          <div class="preview-content" id="previewContent">
            å…¬å‘Šå…§å®¹å°‡åœ¨æ­¤é¡¯ç¤º...
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- JavaScript -->
  <script>
    // é€šçŸ¥æ•¸æ“š
    let notifications = [
      {
        id: 1,
        type: 'activity',
        icon: 'fa-calendar-check',
        title: 'æ–°æ´»å‹•ç™¼å¸ƒ',
        text: 'ç§‘å­¸ç‡Ÿæ´»å‹•å·²ç™¼å¸ƒï¼Œè«‹æŸ¥çœ‹è©³æƒ…ä¸¦å ±å',
        time: '2å°æ™‚å‰',
        read: false
      },
      {
        id: 2,
        type: 'deadline',
        icon: 'fa-clock',
        title: 'å ±åå³å°‡æˆªæ­¢',
        text: 'ä¸‹æœˆæ´»å‹•å ±åå°‡æ–¼ä»Šæ—¥16:00æˆªæ­¢',
        time: '5å°æ™‚å‰',
        read: false
      },
      {
        id: 3,
        type: 'announcement',
        icon: 'fa-bullhorn',
        title: 'ç³»çµ±å…¬å‘Š',
        text: 'æœˆæœƒæ™‚é–“èª¿æ•´è‡³10æœˆ15æ—¥ä¸Šåˆ10é»',
        time: '1å¤©å‰',
        read: false
      }
    ];

    // æ›´æ–°æ™‚é–“é¡¯ç¤º
    function updateTime() {
      const now = new Date();

      // æ ¼å¼åŒ–å®Œæ•´çš„æ™‚é–“æ—¥æœŸå­—ä¸²
      const options = {
        year: 'numeric',
        month: '2-digit',
        day: '2-digit',
        weekday: 'long',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        hour12: true
      };

      let timeString = now.toLocaleDateString('zh-TW', options);

      // èª¿æ•´æ ¼å¼ç‚ºï¼š2025å¹´09æœˆ18æ—¥ æ˜ŸæœŸå›› ä¸Šåˆ09:56:44
      timeString = timeString
        .replace(/(\d{4})\/(\d{1,2})\/(\d{1,2})/, '$1å¹´$2æœˆ$3æ—¥')
        .replace(/\s+/g, ' '); // è¦ç¯„åŒ–ç©ºç™½å­—ç¬¦

      document.getElementById('timeDisplay').textContent = timeString;
    }

    // é é¢è¼‰å…¥å¾Œç«‹å³åŸ·è¡Œ
    document.addEventListener('DOMContentLoaded', function () {
      updateTime();
      // æ¯ç§’æ›´æ–°æ™‚é–“
      setInterval(updateTime, 1000);
      renderNotifications();
      updateNotificationBadge();
    });

    // æ¸²æŸ“é€šçŸ¥åˆ—è¡¨
    function renderNotifications() {
      const notificationList = document.getElementById('notificationList');
      
      if (notifications.length === 0) {
        notificationList.innerHTML = `
          <div class="notification-empty">
            <i class="fas fa-bell-slash"></i>
            <div>æš«ç„¡é€šçŸ¥</div>
          </div>
        `;
        return;
      }

      notificationList.innerHTML = notifications.map(notif => `
        <div class="notification-item ${notif.read ? '' : 'unread'}" onclick="markAsRead(${notif.id})">
          <div class="notification-icon ${notif.type}">
            <i class="fas ${notif.icon}"></i>
          </div>
          <div class="notification-content">
            <div class="notification-title">${notif.title}</div>
            <div class="notification-text">${notif.text}</div>
            <div class="notification-time">${notif.time}</div>
          </div>
          <button class="notification-delete" onclick="deleteNotification(event, ${notif.id})">
            <i class="fas fa-times"></i>
          </button>
        </div>
      `).join('');
    }

    // æ›´æ–°é€šçŸ¥æ•¸é‡å¾½ç« 
    function updateNotificationBadge() {
      const unreadCount = notifications.filter(n => !n.read).length;
      const icon = document.querySelector('.icon');
      
      if (unreadCount > 0) {
        icon.setAttribute('data-count', unreadCount);
        // æ›´æ–° ::after å½å…ƒç´ å…§å®¹éœ€è¦å‹•æ…‹ä¿®æ”¹æ¨£å¼
        const style = document.createElement('style');
        style.textContent = `.icon::after { content: '${unreadCount}'; }`;
        document.head.appendChild(style);
      } else {
        // ç§»é™¤å¾½ç« 
        const style = document.createElement('style');
        style.textContent = `.icon::after { display: none; }`;
        document.head.appendChild(style);
      }
    }

    // æ¨™è¨˜å–®å€‹é€šçŸ¥ç‚ºå·²è®€
    function markAsRead(id) {
      const notification = notifications.find(n => n.id === id);
      if (notification && !notification.read) {
        notification.read = true;
        renderNotifications();
        updateNotificationBadge();
      }
    }

    // æ¨™è¨˜å…¨éƒ¨ç‚ºå·²è®€
    function markAllAsRead() {
      notifications.forEach(n => n.read = true);
      renderNotifications();
      updateNotificationBadge();
    }

    // åˆªé™¤å–®å€‹é€šçŸ¥
    function deleteNotification(event, id) {
      event.stopPropagation();
      notifications = notifications.filter(n => n.id !== id);
      renderNotifications();
      updateNotificationBadge();
    }

    // æ¸…é™¤å…¨éƒ¨é€šçŸ¥
    function clearAllNotifications() {
      if (confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰é€šçŸ¥å—ï¼Ÿ')) {
        notifications = [];
        renderNotifications();
        updateNotificationBadge();
      }
    }

    // é€šçŸ¥é¢æ¿æ§åˆ¶
    const notificationIcon = document.getElementById('notificationIcon');
    const notificationPanel = document.getElementById('notificationPanel');

    notificationIcon.addEventListener('click', (e) => {
      e.stopPropagation();
      notificationPanel.style.display = notificationPanel.style.display === 'block' ? 'none' : 'block';
      // é—œé–‰å…¶ä»–é¢æ¿
      dropdown.style.display = 'none';
    });

    // é ­åƒä¸‹æ‹‰é¸å–®æ§åˆ¶
    const avatar = document.getElementById('avatar');
    const dropdown = document.getElementById('dropdown');

    avatar.addEventListener('click', (e) => {
      e.stopPropagation();
      dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
      // é—œé–‰é€šçŸ¥é¢æ¿
      notificationPanel.style.display = 'none';
    });

    window.addEventListener('click', function (e) {
      if (!notificationIcon.contains(e.target) && !notificationPanel.contains(e.target)) {
        notificationPanel.style.display = 'none';
      }
      if (!avatar.contains(e.target) && !dropdown.contains(e.target)) {
        dropdown.style.display = 'none';
      }
    });

    // ä¸€ç´šé¸å–®æ§åˆ¶
    function toggleMenu(element) {
      const menuItem = element.parentElement;
      const submenu = menuItem.querySelector('.submenu');
      const isExpanded = menuItem.classList.contains('expanded');

      // é—œé–‰æ‰€æœ‰å…¶ä»–ä¸€ç´šé¸å–®
      document.querySelectorAll('.menu-item').forEach(item => {
        if (item !== menuItem) {
          item.classList.remove('expanded');
          const otherSubmenu = item.querySelector('.submenu');
          if (otherSubmenu) {
            otherSubmenu.classList.remove('show');
          }
        }
      });

      // åˆ‡æ›ç•¶å‰é¸å–®ï¼ˆå¯ä»¥å±•é–‹ä¹Ÿå¯ä»¥æ”¶åˆï¼‰
      if (isExpanded) {
        menuItem.classList.remove('expanded');
        submenu.classList.remove('show');
      } else {
        menuItem.classList.add('expanded');
        submenu.classList.add('show');
      }
    }

    // å„ªå…ˆç´šé¸æ“‡
    document.querySelectorAll('.priority-option').forEach(option => {
      option.addEventListener('click', function () {
        document.querySelectorAll('.priority-option').forEach(opt => opt.classList.remove('selected'));
        this.classList.add('selected');
        this.querySelector('input[type="radio"]').checked = true;
      });
    });

    // æª”æ¡ˆä¸Šå‚³è™•ç†
    const fileUpload = document.getElementById('fileUpload');
    const fileInput = document.getElementById('fileInput');
    const fileList = document.getElementById('fileList');
    let uploadedFiles = [];

    fileUpload.addEventListener('click', () => fileInput.click());

    fileUpload.addEventListener('dragover', (e) => {
      e.preventDefault();
      fileUpload.classList.add('dragover');
    });

    fileUpload.addEventListener('dragleave', () => {
      fileUpload.classList.remove('dragover');
    });

    fileUpload.addEventListener('drop', (e) => {
      e.preventDefault();
      fileUpload.classList.remove('dragover');
      handleFiles(e.dataTransfer.files);
    });

    fileInput.addEventListener('change', (e) => {
      handleFiles(e.target.files);
    });

    function handleFiles(files) {
      Array.from(files).forEach(file => {
        if (file.size <= 10 * 1024 * 1024) { // 10MBé™åˆ¶
          uploadedFiles.push(file);
          addFileToList(file);
        } else {
          alert(`æª”æ¡ˆ ${file.name} è¶…é 10MB é™åˆ¶`);
        }
      });
    }

    function addFileToList(file) {
      const fileItem = document.createElement('div');
      fileItem.className = 'file-item';
      fileItem.innerHTML = `
        <div class="file-info">
          <i class="fas fa-file"></i>
          <span>${file.name} (${formatFileSize(file.size)})</span>
        </div>
        <i class="fas fa-times remove-file" onclick="removeFile('${file.name}', this)"></i>
      `;
      fileList.appendChild(fileItem);
    }

    function removeFile(fileName, element) {
      uploadedFiles = uploadedFiles.filter(file => file.name !== fileName);
      element.parentElement.remove();
    }

    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    // é è¦½åŠŸèƒ½
    function previewAnnouncement() {
      const title = document.getElementById('title').value;
      const content = document.getElementById('content').value;
      const category = document.getElementById('category').value;
      const priority = document.querySelector('input[name="priority"]:checked').value;

      if (!title || !content) {
        alert('è«‹å¡«å¯«æ¨™é¡Œå’Œå…§å®¹');
        return;
      }

      const categoryText = {
        'general': 'ä¸€èˆ¬å…¬å‘Š',
        'urgent': 'ç·Šæ€¥é€šçŸ¥',
        'activity': 'æ´»å‹•å…¬å‘Š',
        'meeting': 'æœƒè­°é€šçŸ¥',
        'competition': 'ç«¶è³½è³‡è¨Š',
        'academic': 'å­¸è¡“æ´»å‹•'
      };

      const priorityText = {
        'high': 'ğŸ”´ é«˜å„ªå…ˆç´š',
        'medium': 'ğŸŸ¡ ä¸­å„ªå…ˆç´š',
        'normal': 'ğŸŸ¢ ä¸€èˆ¬å„ªå…ˆç´š'
      };

      document.getElementById('previewTitle').textContent = title;
      document.getElementById('previewCategory').textContent = categoryText[category];
      document.getElementById('previewDate').textContent = new Date().toLocaleDateString('zh-TW');
      document.getElementById('previewPriority').textContent = priorityText[priority];
      document.getElementById('previewContent').textContent = content;

      document.getElementById('previewSection').style.display = 'block';
      document.getElementById('previewSection').scrollIntoView({ behavior: 'smooth' });
    }

    // æ¸…ç©ºè¡¨å–®
    function clearForm() {
      if (confirm('ç¢ºå®šè¦æ¸…ç©ºè¡¨å–®å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸã€‚')) {
        document.getElementById('announcementForm').reset();
        uploadedFiles = [];
        fileList.innerHTML = '';
        document.getElementById('previewSection').style.display = 'none';

        // é‡ç½®å„ªå…ˆç´šé¸æ“‡
        document.querySelectorAll('.priority-option').forEach(opt => opt.classList.remove('selected'));
        document.querySelector('.priority-normal').classList.add('selected');
      }
    }

    // å„²å­˜è‰ç¨¿
    function saveAsDraft() {
      const formData = {
        title: document.getElementById('title').value,
        content: document.getElementById('content').value,
        category: document.getElementById('category').value,
        priority: document.querySelector('input[name="priority"]:checked').value,
        publishDate: document.getElementById('publishDate').value,
        expireDate: document.getElementById('expireDate').value,
        emailNotify: document.getElementById('emailNotify').checked,
        pushNotify: document.getElementById('pushNotify').checked,
        smsNotify: document.getElementById('smsNotify').checked,
        files: uploadedFiles.map(file => file.name)
      };

      // å„²å­˜åˆ°è¨˜æ†¶é«”è®Šæ•¸ï¼ˆå¯¦éš›æ‡‰ç”¨ä¸­æ‡‰è©²ç™¼é€åˆ°å¾Œç«¯ï¼‰
      const draftKey = 'announcement_draft_' + new Date().getTime();

      alert('è‰ç¨¿å·²å„²å­˜ï¼');
    }

    // è¡¨å–®æäº¤è™•ç†
    document.getElementById('announcementForm').addEventListener('submit', function (e) {
      e.preventDefault();

      const formData = new FormData();
      formData.append('title', document.getElementById('title').value);
      formData.append('content', document.getElementById('content').value);
      formData.append('category', document.getElementById('category').value);
      formData.append('priority', document.querySelector('input[name="priority"]:checked').value);
      formData.append('publishDate', document.getElementById('publishDate').value);
      formData.append('expireDate', document.getElementById('expireDate').value);
      formData.append('emailNotify', document.getElementById('emailNotify').checked);
      formData.append('pushNotify', document.getElementById('pushNotify').checked);
      formData.append('smsNotify', document.getElementById('smsNotify').checked);

      uploadedFiles.forEach(file => {
        formData.append('files[]', file);
      });

      // æ¨¡æ“¬æäº¤ï¼ˆå¯¦éš›æ‡‰ç”¨ä¸­æ‡‰è©²ç™¼é€åˆ°å¾Œç«¯APIï¼‰
      setTimeout(() => {
        document.getElementById('successMessage').style.display = 'block';
        document.getElementById('successMessage').scrollIntoView({ behavior: 'smooth' });

        // 3ç§’å¾Œéš±è—æˆåŠŸè¨Šæ¯
        setTimeout(() => {
          document.getElementById('successMessage').style.display = 'none';
        }, 3000);
      }, 1000);
    });

    // è¨­å®šé è¨­ç™¼å¸ƒæ—¥æœŸç‚ºç•¶å‰æ™‚é–“
    window.addEventListener('load', function () {
      const now = new Date();
      const localDateTime = new Date(now.getTime() - now.getTimezoneOffset() * 60000).toISOString().slice(0, 16);
      document.getElementById('publishDate').value = localDateTime;

      // è¨­å®šé è¨­åˆ°æœŸæ—¥æœŸç‚º30å¤©å¾Œ
      const expireDate = new Date(now.getTime() + 30 * 24 * 60 * 60 * 1000);
      const localExpireDateTime = new Date(expireDate.getTime() - expireDate.getTimezoneOffset() * 60000).toISOString().slice(0, 16);
      document.getElementById('expireDate').value = localExpireDateTime;
    });

    // å¯¦æ™‚æ›´æ–°å­—æ•¸çµ±è¨ˆ
    const contentTextarea = document.getElementById('content');
    const titleInput = document.getElementById('title');

    function addCharacterCount() {
      // ç‚ºå…§å®¹æ·»åŠ å­—æ•¸çµ±è¨ˆ
      if (!document.getElementById('contentCount')) {
        const contentCount = document.createElement('small');
        contentCount.id = 'contentCount';
        contentCount.style.color = '#999';
        contentCount.style.fontSize = '12px';
        contentCount.textContent = '0 å­—';
        contentTextarea.parentNode.appendChild(contentCount);
      }

      // ç‚ºæ¨™é¡Œæ·»åŠ å­—æ•¸çµ±è¨ˆ
      if (!document.getElementById('titleCount')) {
        const titleCount = document.createElement('small');
        titleCount.id = 'titleCount';
        titleCount.style.color = '#999';
        titleCount.style.fontSize = '12px';
        titleCount.textContent = '0 å­—';
        titleInput.parentNode.appendChild(titleCount);
      }
    }

    contentTextarea.addEventListener('input', function () {
      const count = this.value.length;
      document.getElementById('contentCount').textContent = count + ' å­—';

      if (count > 1000) {
        document.getElementById('contentCount').style.color = '#ff4757';
      } else {
        document.getElementById('contentCount').style.color = '#999';
      }
    });

    titleInput.addEventListener('input', function () {
      const count = this.value.length;
      document.getElementById('titleCount').textContent = count + ' å­—';

      if (count > 50) {
        document.getElementById('titleCount').style.color = '#ff4757';
      } else {
        document.getElementById('titleCount').style.color = '#999';
      }
    });

    // é é¢è¼‰å…¥å®Œæˆå¾Œåˆå§‹åŒ–
    window.addEventListener('load', function () {
      addCharacterCount();
    });

    // é»æ“Šå…¶ä»–åœ°æ–¹é—œé–‰æ‰€æœ‰é¸å–®
    document.addEventListener('click', function (e) {
      if (!e.target.closest('.menu')) {
        document.querySelectorAll('.menu-item').forEach(item => {
          item.classList.remove('expanded');
          const submenu = item.querySelector('.submenu');
          if (submenu) {
            submenu.classList.remove('show');
          }
          item.querySelectorAll('.submenu-item').forEach(subItem => {
            subItem.classList.remove('expanded');
            const subSubmenu = subItem.querySelector('.sub-submenu');
            if (subSubmenu) {
              subSubmenu.classList.remove('show');
            }
          });
        });
      }
    });
  </script>
</body>

</html>